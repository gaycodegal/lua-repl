# Lua REPL

This is as complete of a basic Lua REPL as I could make as a Web app. 
The focus is on full offline functionality. To that end, this app supports
Portable Web App, Web Bundle, or zip formats and works fully offline.

Implements a fake readline and 'eprintf' which is just printf but it prints to web or terminal depending on environment.

Try it live at: gaycodegal.github.io/wasm-term or see the Releases page
for downloads

## Compiling

Since WASM is a universal format, compiling is typically not
necessary unless you modify the makefiles or change versions
of emscripten. However, if you do you can follow these steps:

You first should activate emscripten, which is done with

```bash
source emsdk_env.sh
```

in the emscripten folder.

Then you are ready to compile this project

```
make
```

This will produce `html/lua.js` and `html/lua.wasm`.

## Packaging

To create the Zip and Web Bundle formats run:

```bash
make web-bundle
```

## Testing locally

You can either test the packaged Lua-REPL.wbn generated by the
[Packaging][#Packaging] step, or use python3 as a server with

```bash
python -m http.server 8000
```

and then visit the app at [http://localhost:8000](http://localhost:8000).

You need to use a server or the web bundle, because you can't fetch
.wasm binaries from a `file://` url.

## Use of readline

readline is a GPL licensed code, meaning if you link against it, you have to distribute your source code. You may want to try https://github.com/arangodb/linenoise-ng instead, which is compatible with closed or open source projects via disclaimer.

This library doesn't use readline's source code to do input on the web, it just uses a simple `<input>` element, as this was the most accessible way I could think of to do line-editing functionality.

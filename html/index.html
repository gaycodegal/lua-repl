<!doctype html>
<html>
  <body>
    <pre id="output"></pre>
    <script>
      const history = [];
      function print(s) {
	  history.push(s);
	  if (history.length > 10) {
	      history.splice(0, history.length - 10);
	  }
	  const output = document.getElementById("output");
	  output.textContent = history.join('\n');
      }
      var Module = {
	  onRuntimeInitialized: async function() {
	      // technically main is already called by emscripten
	      // so this will run main a second time.

	      const vec = new Module.StringList();
	      vec.push_back("One");
	      vec.push_back("Two");
	      vec.push_back("1.234");
	      vec.push_back("Four");
	      print("hi");
              print('main result: ' + await Module.main(vec));
	  }
      };
    </script>
    <script src="term.js"></script>
  </body>
</html>
